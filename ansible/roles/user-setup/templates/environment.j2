# StreaminOS Environment Configuration
# Auto-generated by Ansible - DO NOT EDIT MANUALLY
# Console OS for headless game streaming - no compositor auto-start

# XDG Base Directory Specification
export XDG_CONFIG_HOME="{{ streaminos_xdg_config_home }}"
export XDG_DATA_HOME="{{ streaminos_xdg_data_home }}"
export XDG_CACHE_HOME="{{ streaminos_xdg_cache_home }}"
export XDG_STATE_HOME="{{ streaminos_xdg_state_home }}"
export XDG_RUNTIME_DIR="/run/user/{{ streaminos_uid }}"

# Wayland configuration for gamescope
# Note: WAYLAND_DISPLAY is set dynamically by gamescope when launched
export MOZ_ENABLE_WAYLAND=1
export QT_QPA_PLATFORM=wayland
export GDK_BACKEND=wayland
export SDL_VIDEODRIVER=wayland
export CLUTTER_BACKEND=wayland

# NVIDIA workarounds (if needed)
# export GBM_BACKEND=nvidia-drm
# export __GLX_VENDOR_LIBRARY_NAME=nvidia

# AMD GPU (default for StreaminOS)
export RADV_PERFTEST=aco
export mesa_glthread=true

# Gaming optimizations
export PROTON_ENABLE_NVAPI=1
export DXVK_ASYNC=1
export WINE_FULLSCREEN_FSR=1

# Sunshine streaming
export SUNSHINE_MIGRATE_CONFIG=1

# Custom environment variables
{% for key, value in streaminos_environment.items() %}
export {{ key }}="{{ value }}"
{% endfor %}

# ============================================================================
# Gamescope Configuration
# ============================================================================
# Gamescope handles display/compositor functionality
# No wlroots configuration needed - gamescope uses DRM backend directly
